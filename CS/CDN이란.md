# CDN (콘텐츠 전송 네트워크)

## CDN 이란

데이터 사용량이 많은 에플리케이션의 웹 페이지 로드 속도를 높이는 상호 연결된 서버 네트워크이다. CDN은 콘텐츠 전송 네트워크, 콘텐츠 배포 네트워크를 의미한다, 사용자가 대용량의 파일을 로드 시 시간이 오래걸리는데 대신 웹사이트 컨텐츠의 지리적으로 가까운 CDN 서버에 저장되어 빠르게 로드될수 있도록한다.

## CDN이 중요한 이유

대기시간을 줄이거나 네트워크 설계로 인해 발생하는 통신 지연을 줄인다. 인터넷의 경우 서버와 클라이언트간의 통신 트래픽이 아주 먼 물리적 거리를 이동 해야한다. 또한 클라이언트에서 서버로 요청을 보내고 응답을 반환하는 양방향 통신이다.

CDN은 클라이언트와 서버 사이에 중간 서버를 두어 효율성을 높인다. 이러한 CDN 서버는 클라이언트 - 서버 통신의 일부를 관리하여 웹서버에 대한 트래픽을 줄이고 대역폭 소비를 줄여, 에플리케이션 사용자의 환경을 개선하다.

## CDN 장점

* 페이지 로드시간 단축
* 대역폭 비용 절감
* 콘텐츠 가용성 제고
* 웹사이트 보안 강화

## CDN을 통해 전송할 수 있는 인터넷 콘텐츠는 어떤것들이 있나

* 정적 콘텐츠
  * 사용자간에 변경되지 않는 엡사이트 데이터, 웹사이트 헤더 이미지, 로고, 글꼴 스타일 등은 모든 사용자에게 동일하게 유지되며 기업이 변경하지 안흔데, 정적데이터는 수정 처리 생성할 필요가 없으며 CDN에 저장하는것이 이상적이다
* 동적 콘텐츠
  * 소셜미디어 뉴스피드, 날씨 보고서, 로그인 상태 및 채팅 메시지와 같은 동적 컨텐츠는 웹사이트 사용자마다 다르다, 이 데이터는 사용자의 위치, 로그인 시간 또는 사용자 기본설정에 따라 변경되며 웹사이트는 모든 사용자 상호 작용에 대한 데이터를 생성해야 한다,

## CDN 작동방식

여러 지리적 위치에 접속지점(POP) 또는 CDN 엣지 서버 그룹을 설정하는 방식으로 작동한다, 지리적으로 분산된 이 네트워크는 캐싱, 동적 가속 및 엣지 로직계산의 원리를 기반으로 작동한다.

### 캐싱

캐싱은 동일한 데이터를 여러 복사본을 저장하는 프로세스 이다, 컴퓨터에서 캐싱의 원리는 모든 유형의 메모리 및 스토리지 관리에 적용된다, CDN 기술에서 이 용어는 네트워크의 여러서버에 정적 웹사이트 콘텐츠를 저장하는 프로세스를 의미한다. CDN에서 캐싱은 다음과같이 작동

1. 지리적으로 먼 웹사이트 방문자는 사이트에서 웹 컨텐츠를 요청
2. 요청이 앱 서버 또는 오리진 서버에 도달, 오리진 서버는 원격 방문자에게 응답을 보낸다, 또한 해당 방문자와 지리적으로 가까운 CDN POP에게 응답 복사본을 보낸다.
3. CDN POP 서버는 복사된 캐싱 파일 저장
4. 다음에 해당 방문자 혹은 위치적으로 주변의 방문자가 동일 요청 시 오리진 서버가 아닌 캐싱서버가 응답을 보낸다

### 동적가속

서버와 클라이언트 사이의 중개 CDN 서버로 인해 발생하는 동적 웹 콘텐츠 요청에 대한 서버 응답시간을 단축하는 것이다, 사용자 요청이 있을 시 콘텐츠가 변경될 수 있기 때문에 동적 웹컨텐츠에서는 캐싱이 제대로 작동 하지 않는다. CDN 서버는 모든 동적 요청에 대해 오리진 서버와 다시 연결해야 하지만 자신과 오리진 서버간의 연결을 최적화 하여 프로세스를 가속화 한다,

클라이언트가 인터넷을 통해 웹서버로 직접 동적 요청을 보내는 경우, 네트워크 지연시간으로 인해 요청이 손실되거나 지연될 수 있다. 보안 검증을 위해 연결을 닫고 여는데 시간이 걸릴수 있다. 반면 근처의 CDN 서버가 요청을 오리진 서버로 전달의 경우, 신뢰할 수있는 지속적인 연결이 이미 설정되어, 예를들면 다음과 같은 기능을 통해 이들의 연결을 최적화 가능하다

* 지능형 라우팅 알고리즘
* 오리진에 대한 지리적 접근성
* 클라이언트 요청을 처리 할 수있으므로 클라이언트 요청을 줄일 수 있다.

### 엣지 로직 계산

CDN엣지 서버를 프로그래밍한다

* 사용자 요청을 검사하고 캐싱 동작을 수정
* 잘못된 사용자 요청을 확인하고 처리
* 응답 전 컨텐츠를 수정하거나 최적화
