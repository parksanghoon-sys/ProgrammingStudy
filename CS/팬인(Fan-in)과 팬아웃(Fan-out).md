## FAN ?
Fan 이란 컴퓨터 과학과 전자공학에서는 "분산하다", "확산시키다" 혹은 "집중시키다"와 같은 개념으로 사용 된다.
* 팬인 :
	* 여러 입력 신호나 데이터 스트림이 하나의 단일 지점으로 집중되는 것을 의미, 
	* 예를들어 여러 센서로부터의 데이터가 하나의 처리 유닛으로 모이는 상황에서 사용되는 의미
* 펜아웃 
	* 하나의 신호원이나 데이터 스트림이 여러 출력 포인트로 분산되는 것을 의미한다. 
	* 예를 들면, 하나의 처리 유닛에서 여러 다른 유닛으로 데이터를 전송하는 상황을 설명 시에 사용이 된다.
정보의 흐름을 시각화 하고, 시스템의 설계와 구조를 평가 하는데 중요한 역할을 한다. 

## 소프트웨어 개발에서 의미

팬인 (FAN-in)
* 재 사용성이 높은코드나 모듈은 높은 팬인 값을 가진다
* 다양한 장소에서 모듈을 호출
* 높은 팬인 값은 모듈이나 함수가 안정적이고 신뢰성 있고, 변경 시 영향 받는 범위가 큰 것을 의미
펜 아웃(FAN-OUT)
* 한 모듈이 너무 많은 다른 모듈에 의존 관계 형성 시 복잡성이 높고 유지관리가 어렵다는 신호일 수 있음
* 낮은 팬 아웃 값은 모듈이나 함수가 단순하고, 의존성이 적으며, 이해하고 관리가 쉽다는 것을 의미한다.

## RabbitMQ 에서의 의미

RabbitMQ에서 **Fan-in(펜인)**과 **Fan-out(펜아웃)**은 메시지 라우팅 패턴을 나타내는 중요한 개념입니다.

## Fan-out (펜아웃) 패턴

**하나의 메시지를 여러 대상으로 동시에 전송**하는 패턴입니다.

### 특징:

- 1:N 관계 (하나의 입력 → 여러 출력)
- 브로드캐스트 메시징
- RabbitMQ의 `fanout` exchange 타입으로 구현

### 설정 예시:

```python
# Producer
channel.exchange_declare(exchange='notifications', exchange_type='fanout')
channel.basic_publish(exchange='notifications', routing_key='', body='새 주문이 접수되었습니다')

# 여러 Consumer가 동일한 메시지를 받음
# - 재고 관리 시스템
# - 결제 처리 시스템  
# - 배송 준비 시스템
```

### 사용 사례:

- 이벤트 알림 (로그, 모니터링)
- 데이터 복제
- 실시간 업데이트 전파

## Fan-in (펜인) 패턴

**여러 소스의 메시지를 하나의 대상으로 집중**시키는 패턴입니다.

### 특징:

- N:1 관계 (여러 입력 → 하나의 출력)
- 메시지 집계 및 통합
- 여러 프로듀서가 같은 큐로 메시지 전송

### 설정 예시:

```python
# 여러 Producer들이 같은 큐에 메시지 전송
# Producer 1 (웹서버)
channel.basic_publish(exchange='', routing_key='log_queue', body='웹 요청 로그')

# Producer 2 (DB서버) 
channel.basic_publish(exchange='', routing_key='log_queue', body='DB 쿼리 로그')

# Producer 3 (API서버)
channel.basic_publish(exchange='', routing_key='log_queue', body='API 호출 로그')

# 하나의 Consumer가 모든 로그를 처리
```

### 사용 사례:

- 로그 집계
- 센서 데이터 수집
- 워크로드 분산 후 결과 통합

## 실제 아키텍처에서의 조합

실제 시스템에서는 두 패턴을 조합해서 사용하는 경우가 많습니다:

```
[주문 시스템] → Fan-out → [재고][결제][배송]
                    ↓
각 시스템의 처리 결과 → Fan-in → [주문 완료 처리]
```

이러한 패턴들은 **마이크로서비스 아키텍처**에서 서비스 간 통신과 이벤트 기반 아키텍처 구현에 핵심적인 역할을 합니다.