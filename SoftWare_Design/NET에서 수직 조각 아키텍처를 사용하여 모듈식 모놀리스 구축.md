# NET에서 수직 조각 아키텍처를 사용하여 모듈식 모놀리스 구축

[출처](https://medium.com/codex/building-a-modular-monolith-with-vertical-slice-architecture-in-net-55dad0729986])

Web Project : building-a-modular-monolith-with-vertical-slice-architecture-in-dotnet

**모듈식 모놀리스는** 모놀리스와 마이크로서비스 아키텍쳐의 좋은 부분을 제공한다, 개발과 배포는 단순성을 결합하는 동시에 모듈간의 명확한 경계를 제공한다.

## 모듈형 모놀리스란?

모듈형 모놀리스는 모놀리스와 마이크로서비스 아키텍처의 가장 좋은 부분을 결합한 아키텍처이다.

### 장점

* 단일 코드 베이스에서 쉬운 개발
* 배포 가능한 단일 애플리케이션
* 모듈간의 명확한 경계
* 모듈의 독립적인 개발
* 모든 모듈을 함께 통합하는 쉬운 통합 테스트
* 각 모듈은 향후 마이크로 서비스로 추출이 될 수있다.

모듈형 모놀리스는 모듈간 명확한 경계가 있다, 모듈은 다른 모듈의 데이터 베이스에 직접 엑세스할 수 없고, 모듈은 공개 API를 통해서만 서로 통신이 가능하다, 이것은 마이크로 서비스와 같이 작동하지만 단일 응용프로그램에서 작동한다,

모듈식 모놀리스에서 모듈은 인터페이스 메소드 호출을 통해 서로 통신한다, 그러나 마이크로서비스는 추가 마이그레이션을 계획하는 경우 모듈간 통신은 이벤트기반 아키텍처를 사용한다

# 모듈형 모놀리스 프로젝트 구조

저는 Shipments, Carriers 및 Stocks의 세 가지 핵심 모듈로 애플리케이션을 구축했습니다. 마이크로 서비스 접근 방식에서는 각각 자체 코드베이스 및 엔드포인트가 있는 별도의 서비스일 수 있습니다.

모듈식 모놀리스에서는 동일한 솔루션의 모듈로 분할됩니다.

* 배송 모듈: 배송 주문 생성을 처리합니다.
* 운송업체 모듈: 배송 파트너에 대한 정보를 유지하고 배송을 위해 배송을 등록합니다.
* 재고 모듈: 제품 재고 수준을 관리합니다.

각 모듈은 다른 모듈이 호출할 인터페이스를 노출합니다. 내부적으로는 동일한 프로세스의 메서드 호출입니다. 네트워크 오버헤드가 없고 분산 트랜잭션이 없습니다.

코드 구조의 경우 [Clean Architecture와](https://antondevtips.com/blog/the-best-way-to-structure-your-dotnet-projects-with-clean-architecture-and-vertical-slices/?utm_source=antondevtips&utm_medium=own&utm_campaign=15-04-2025-newsletter) [Vertical Slice](https://antondevtips.com/blog/the-best-way-to-structure-your-dotnet-projects-with-clean-architecture-and-vertical-slices/?utm_source=antondevtips&utm_medium=own&utm_campaign=15-04-2025-newsletter)를 결합하는 것을 좋아합니다.

Clean Architecture는 애플리케이션의 문제를 별개의 계층으로 분리하여 높은 응집력과 낮은 결합을 촉진하는 것을 목표로 합니다. 도메인, 애플리케이션, 인프라, 프레젠테이션 계층으로 구성됩니다.

Vertical Slice Architecture는 기능별로 애플리케이션을 구성합니다. 각 조각은 UI, 비즈니스 로직 및 데이터 액세스를 포함하여 특정 기능의 모든 측면을 캡슐화합니다.

클린 아키텍처와 수직 슬라이스를 결합하는 것이 모듈식 모놀리스를 포함한 많은 애플리케이션을 위한 훌륭한 아키텍처 설계라는 것을 알았습니다.

각 모듈은 애플리케이션에서 동일한 구조를 따릅니다.

* 도메인: 비즈니스 엔터티 및 로직을 포함합니다.
* 특징: Vertical Slices를 사용하여 비즈니스 기능을 구현합니다.
* 인프라: 데이터베이스와 같은 기술적 문제를 처리합니다.
* PublicApi: 모듈 간 통신을 위한 계약을 정의합니다.


모든 모듈에서 기능을 구현하기 위해 Vertical Slice Architecture를 사용합니다.

많은 이점을 제공합니다.

* 기능 중심: 변경 사항은 특정 기능으로 격리되어 의도하지 않은 부작용의 위험을 줄입니다.
* 확장성: 다른 개발자와 팀이 서로 다른 기능을 독립적으로 작업할 수 있도록 하여 개발을 더 쉽게 확장할 수 있습니다.
* 유연성: 필요에 따라 각 슬라이스 내에서 다양한 기술 또는 접근 방식을 사용할 수 있습니다.
* 유지 관리성: 기능의 모든 측면이 단일 슬라이스 내에 포함되어 있으므로 솔루션에서 탐색, 이해 및 유지 관리가 더 쉽습니다.
* 결합 감소: 서로 다른 슬라이스 간의 종속성을 최소화합니다.

이러한 장점은 모듈형 모놀리스에 매우 유용합니다.

# 요약

마이크로서비스로 시작하지 않는 이유는 무엇입니까?

마이크로서비스를 설정하려면 상당한 복잡성이 필요합니다.

* 여러 데이터베이스
* 네트워크 호출 또는 이벤트 기반 통신
* 서비스 검색
* 분산 트랜잭션
* 모니터링

그리고 그 이상.

이러한 복잡성은 처음에는 필요하지 않을 수 있습니다.

모듈식 모놀리스는 좋은 경계를 유지하면서 단일 코드베이스에서 많은 복잡성을 처리할 수 있습니다. 나중에 공용 인터페이스를 통한 통신을 사용하여 모듈을 마이크로 서비스로 보다 쉽게 추출할 수 있습니다.
