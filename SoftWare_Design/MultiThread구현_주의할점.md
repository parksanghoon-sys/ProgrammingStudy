# 멀티스레드 프로그래밍 주의 해야할점
하나의 프로세스안에 여러개의 스레드를 실행시켜 병렬성을 얻는 프로그래밍 방식이다.  
여러 쓰레드가 같은 프로세스 내에서 자원을 공유하면서 작업을 하기 때문에 발생할 수 있는 **동기화, 교착상태** 등과 같은 문제들을 고려하며 프로그래밍 해야한다.
## 주의해야할점
* ### 굥유 데이터에 대한 접근을 동기화 해야한다.
  * 여러 스레드가 **동시에 공유자원에 접근**하게 되어 데이터의 일관성을 유지하기 위해 동기화가 필요하다.
  * 예를들어, 멀티 스레드 환경에서 공유변수에 대한 접근을 하나의 스레드로 제현 함으로서 정확한 값을 리턴 받을수 있다.
  * 해결방법
    * 뮤텍스, 세마포어, 디벤트 등을 사용하여 해결한다.
* ### 교착상태를 피해야한다.
  * 두개 이상의 작업이 서로 상대방의 **작업이 끝나기만을 기다리고 있으며**, 결과적으로 아무것도 완료하지 못하는 상태이다.
  * 예를들어 프로세스 A가 자원 1을 가지고 있고 프로세스B가 자원2를 가지고 있을때, 프로세스 A는 자원 2를 요청하고 프로세스 B는 자원1을 요청하면 둘다 대기상태에 빠지게 된다.
  * 해결 방법
    * **예방방법** 교창상태가 생길 조건을 없애는 것이다.
    * **회피방법** 교착상태의 발생 가능성을 배재하지 않고 적절히 회피하는것이다.
    * **탐지방법** 교착상태를 허용하지만 상태를 탐지하고 다시 회복하는방법
* ### 경쟁 조건을 피해야 한다.
  * **여러 스레드가 공유 리소스를 동시에 접근할 떄 발생하는 현상이다.** 이때 스레드들이 공유리소스에 대해 동시에 쓰기 작업을 수행하면 데이터의 일관성이 깨지게 되는데 이를 경쟁 조건이라고 한다.
  * 예를들어, 두개의 스레드가 동시에 같은 변수를 증가시킬때 스레드 A와 B가 변수 X의값을 0으로초기화 한 후, X의 값을 1씩 증가시키는데 서로 1씩 증가되어 정확한 값을 사용하지못한다.
  * 해결방법
    * **스레드의 동기화** 기법을 사용해야한다
* 스레드 간의 우선순위를 지정해야한다.
  * 스레드의 우선순위를 1~10* 까지 int 값으로 할당하여 우선순위가 옾은 스레드가 실행 기회를 많이 갖게 한다, 하지만 우선순위가 높다고 항상 먼저 실행한다는 의미는 아니다.
  * 예를들어 스레드A와 B가 있을때 A의 우선순위가 높다면 A가 먼저 실행될 가능성이 높다 하지만 이는 보장되지 않으며 스레드 A와 B의 상대적 우선순위에  따라 다르다.
  * 해결방법
    * setPriority(int newPriority) 메소드를 사용하여 지정합니다.
    * etPriority() 메소드를 사용하여 현재 스레드의 우선순위를 반환합니다.
* 스레드 간의 통신 방법을 결정해야한다.
  * 통신방법
    * 공유 메모리 방식
      * 스레드간에 변수나 자료구조등을 공유하며 데이터를 주고 받는 방식이다.
      * 이방식은 빠르지만 동기화의 문제가 발생 할 수있다.
    * 메세지 전달방식
      * 스레드간에 메세지를 주고 받는 방식이다. 
      * 이 방식은 동기화 문제가 발생하지 않지만 공유 메모리 방식보다 느릴수있다.
* 스레드의 안전성과 데드락 등의 문제가 발생 할수있다.
  * 데드락이란 
    * 멀티프로그래밍 환경 또는 멀티 스레드 환경에서 여러 프로세스 또는 스레드가 한정된 자원을 동시에 사용하기 위해 항상 경쟁 상태에 놓여있다는 것을 의미한다. 이때, 둘 이상의 프로세스가 다른 프로세스가 점유하고있는 자원을 서로 기다릴 떄 무한 대기에 빠지는 상황을 말한다.