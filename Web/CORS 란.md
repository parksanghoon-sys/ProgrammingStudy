CORS(교차 출처 리소스 공유)는  웹페이지가 다른 도메인에 있는 리소스에 접근 가능하도록 허용하는 메커니즘 이다. 웹 브라우저는 보안상의 이유로  동일 **출처 정책(SOP)** 을 따른다 이 정책은 스크립트가 로드된 출처 (프로토콜, 호스트, 포트)와 다른 출처의 리소스에 접근하는 것을 기본적으로 제한한다.

**왜 동일 출처 정책이 필요한가요?**

동일 출처 정책은 웹 보안의 핵심입니다. 만약 이 정책이 없다면, 악의적인 웹사이트가 사용자의 동의 없이 다른 웹사이트(예: 은행 사이트)의 정보를 읽거나, 사용자를 대신하여 특정 작업을 수행할 수 있는 위험이 있습니다. 예를 들어, 악성 사이트가 사용자의 은행 계좌에 접근하여 무단으로 자금을 이체하는 등의 행위를 막기 위한 것입니다.

**CORS가 필요한 이유**

현대 웹 어플리케이션의 경우 다른 도메인과 API , 이미지, CDN 등을 통신하게 된다, 이때 동일 출처 정책 때문에 브라우저는 이 요청을 차단 하는데 이 문제를 해결하기 위해 CORS가 등장한다.

**CORS의 작동 방식**

CORS는 HTTP 헤더를 사용하여 브라우저와 서버 간의 통신을 제어합니다.

1. **클라이언트의 요청 (브라우저):**
    
    - 브라우저는 다른 출처로 요청을 보낼 때, 요청 헤더에 `Origin` 헤더를 추가하여 요청을 보낸 웹 페이지의 출처(프로토콜, 호스트, 포트)를 알립니다.
2. **서버의 응답:**
    
    - 서버는 이 `Origin` 헤더를 확인하고, 해당 출처로부터의 요청을 허용할지 결정합니다.
    - 만약 허용한다면, 서버는 응답 헤더에 `Access-Control-Allow-Origin` 헤더를 포함하여 어떤 출처의 요청을 허용하는지 브라우저에 알려줍니다. 이 값은 특정 출처일 수도 있고, 모든 출처를 허용하는 `*`일 수도 있습니다.
    - 그 외에도 `Access-Control-Allow-Methods` (허용되는 HTTP 메서드), `Access-Control-Allow-Headers` (허용되는 사용자 정의 헤더), `Access-Control-Allow-Credentials` (인증 정보(쿠키, 인증 헤더 등) 전송 허용 여부), `Access-Control-Max-Age` (프리플라이트 요청 캐싱 시간) 등의 헤더를 보낼 수 있습니다.
3. **브라우저의 처리:**
    
    - 브라우저는 서버의 응답에 포함된 CORS 관련 헤더를 확인합니다.
    - `Access-Control-Allow-Origin` 헤더의 값이 현재 웹 페이지의 `Origin`과 일치하거나 `*`인 경우, 브라우저는 요청을 성공적으로 처리하고 응답을 스크립트에 전달합니다.
    - 그렇지 않은 경우, 브라우저는 보안상의 이유로 요청을 차단하고 콘솔에 CORS 오류 메시지를 출력합니다.