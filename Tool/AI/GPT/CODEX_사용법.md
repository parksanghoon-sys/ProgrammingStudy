# CODEX 사용법

## 1. CODEX란?

- CODEX는 코드 작성, 수정, 리뷰, 문서화 작업을 터미널 기반으로 빠르게 수행하는 AI 코딩 도우미입니다.
- 프로젝트 폴더에서 파일 탐색, 코드 변경, 명령 실행까지 한 흐름으로 진행할 수 있습니다.

## 2. 기본 사용 흐름

1. 작업 위치를 명확히 말합니다.
2. 원하는 결과를 구체적으로 요청합니다.
3. 변경 후 결과(수정 파일, 테스트 여부)를 확인합니다.

예시 요청:

- "src/api/user.ts 에서 null 처리 버그 수정해줘"
- "이 프로젝트 빌드 에러 원인 찾고 고쳐줘"
- "README에 실행 방법 정리해줘"

## 3. 잘 쓰는 팁

- 범위 지정: 파일/폴더/기능 단위로 요청
- 완료 기준 제시: "테스트 통과까지", "문서까지" 등
- 제약 조건 전달: 사용 라이브러리, 코딩 스타일, 성능 요구사항

## 4. 요청 템플릿

- 목표: 무엇을 바꿀지
- 범위: 어떤 파일/기능인지
- 조건: 지켜야 할 규칙
- 검증: 테스트/실행 확인 방법

템플릿 예시:
"목표: 로그인 API 에러 처리 개선
범위: backend/auth/*
조건: 기존 인터페이스 유지, any 금지
검증: 단위 테스트 통과 + 실패 케이스 2개 추가"

## 5. Skill/Agent/컨텍스트 엔지니어링 (Claude Code 스타일)

### 5.1 운영 구조

1. 전역 규칙: `AGENTS.md`에 공통 원칙만 둡니다.
2. 작업별 규칙: 기능 단위로 Skill을 분리합니다 (`SKILL.md` + `scripts/` + `references/`).
3. 요청 템플릿 고정: 같은 형식으로 요청해 결과 편차를 줄입니다.
4. 완료 정의(DoD) 명시: "무엇이 끝인지"를 매번 명확히 적습니다.

### 5.2 Skill 설계 원칙

1. `SKILL.md`는 짧고 명확하게 작성합니다.
2. 상세 규칙/문서는 `references/`로 분리합니다.
3. 반복 구현 코드는 `scripts/`로 고정합니다.
4. 프레임워크/클라우드 변형은 파일을 분리합니다 (예: `references/aws.md`, `references/gcp.md`).
5. `description`에는 "언제 이 스킬을 써야 하는지"를 구체적으로 작성합니다.

### 5.3 Agent 요청 템플릿

아래 형식을 복붙해서 요청하면 품질이 안정적입니다.

```text
목표: 무엇을 바꿀지 한 줄
범위: 파일/폴더/모듈
제약: 금지사항, 스타일, 성능, 호환성
검증: 어떤 테스트/명령으로 통과 판정할지
출력형식: 변경 파일 + 핵심 이유 + 리스크
```

### 5.4 컨텍스트 엔지니어링 체크리스트

1. 관련 파일만 지정합니다.
2. 예외 케이스 2~3개를 먼저 제공합니다.
3. 하지 말아야 할 것을 명시합니다 (예: public API 변경 금지).
4. 성공 기준을 수치화합니다 (예: 응답시간, 테스트 기준).
5. 큰 작업은 단계별로 쪼개서 요청합니다.

## 6. 이해 쉬운 실전 예제

### 6.1 나쁜 요청 vs 좋은 요청

나쁜 요청:

```text
로그인 고쳐줘
```

좋은 요청:

```text
목표: 로그인 실패 시 500 대신 401/403을 올바르게 반환
범위: src/auth/login.ts, src/auth/errors.ts
제약: 기존 API 응답 스키마 유지, 신규 라이브러리 추가 금지
검증: npm test 중 auth 관련 테스트 통과, 실패 케이스 2개 추가
출력형식: 변경 파일 목록 + 원인 + 재발 방지 포인트
```

### 6.2 버그 수정 요청 예제

```text
목표: 사용자 상세 조회에서 null.profile 접근 에러 수정
범위: src/api/user.ts
제약: 함수 시그니처 변경 금지
검증: 기존 테스트 통과 + null profile 테스트 1개 추가
추가요청: 최소 수정으로 처리
```

### 6.3 리팩토링 요청 예제

```text
목표: 결제 계산 로직 가독성 개선 (동작 동일 유지)
범위: src/payment/calc.ts
제약: public 함수명/반환 타입 유지
검증: 회귀 테스트 통과, 복잡도 감소 근거 제시
```

### 6.4 코드 리뷰 요청 예제

```text
목표: 배포 전 위험도 높은 문제만 리뷰
범위: feature/order-discount 브랜치 변경분
기준: 버그, 보안, 성능, 회귀 위험 중심
출력형식: 심각도 순으로 파일:라인 + 문제 + 수정 제안
```

### 6.5 문서화 요청 예제

```text
목표: 신규 입사자가 10분 안에 실행 가능하도록 README 개선
범위: README.md
제약: Windows/macOS 모두 포함
검증: 설치, 실행, 테스트 명령을 복붙 가능한 형태로 작성
```

## 7. Skill 폴더 예시 구조

```text
Tool/AI/GPT/my-skill/
  SKILL.md
  scripts/
    run_checks.ps1
  references/
    api-rules.md
    coding-style.md
```

예시 `SKILL.md` frontmatter:

```yaml
---
name: bug-fix-helper
description: Backend 버그 수정 워크플로우와 재현-수정-검증 절차를 제공. null 참조, 예외 처리, 회귀 테스트 보강 요청 시 사용.
---
```

## 8. 권한/자동화 실행 옵션

- 안전 자동화: `codex --full-auto`
- 완전 무승인/무샌드박스(고위험): `codex --dangerously-bypass-approvals-and-sandbox`

## 9. 주의할 점

- 요구사항이 모호하면 결과도 모호해집니다.
- 큰 작업은 단계별로 나눠 요청하는 것이 안전합니다.
- 변경 후에는 반드시 실행/테스트로 검증합니다.

## 10. 추천 시작 문장

- "현재 폴더 기준으로 구조 먼저 파악하고 개선안 제시해줘"
- "버그 재현 방법부터 확인하고 최소 수정으로 고쳐줘"
- "코드 리뷰 관점으로 위험도 높은 문제부터 찾아줘"
